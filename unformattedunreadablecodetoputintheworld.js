TTimers={};{const e=e=>api.broadcastMessage(e,{color:"#ff9d87"}),t=TTimers;let o=1,a=0,s=0,i=0,l=1/0,n;setTickTimeout=(r,p=0)=>{const m=o++,c=a+p;if(t[m]=[r,c,i,0],i?t[i][3]=m:s=m,i=m,c<l&&(l=c),n=!0,!p){try{r()}catch(t){e("TTI: "+t)}clearTickTimeout(m)}return m},clearTickInterval=clearTickTimeout=e=>{const o=t[e];if(o){const a=o[2],l=o[3];a?t[a][3]=l:s=l,l?t[l][2]=a:i=a,delete t[e]}},setTickInterval=(e,o)=>{const a=setTickTimeout(e,o||=1);return t[a][4]=o,a},tick=(o,i)=>{if(i||++a>=l){n=!1;let o=1/0,i=s;for(;i;){const s=t[i];if(s[1]<=a){try{s[0]()}catch(t){e("TT: "+t)}if(s[4]){const e=a+s[4];s[1]=e,e<o&&(o=e)}else clearTickTimeout(i)}else s[1]<o&&(o=s[1]);i=s[3]}l=o,n&&tick(1,!0)}}}function styTxt(e){let t=styTxt;if(t.e||(t.e={c:"color",w:"fontWeight",st:"fontStyle",s:"fontSize",o:"opacity"},t.t=/(\\\<)|<(st|[cworis]) *([^>]+)?>/g),""==e)return[""];const o=[],a=new Map;let s="",i=0;for(let{index:l,0:n,1:r,2:p,3:m}of[...e.matchAll(t.t),{index:e.length}])if(s+=e.slice(i,l),i=l+(n?.length??0),r)s+="<";else if(s&&(o.push(a.size?{str:s,style:Object.fromEntries(a)}:s),s=""),l!=e.length)if("r"==p)a.clear();else if("i"==p&&m){const e=Object.fromEntries(a);delete e.fontStyle,o.push({icon:m,style:e})}else{let e=t.e[p];m?a.set(e,"o"==p?Number(m):m):a.delete(e)}return o}var valuableItems={Gold_Antlers:5500,Messy_Stone:20,Gold_Watermelon_Slice:300,Gold_Fragment:200,Coal:245,Raw_Iron:650,Iron_Bar:750,Gold_Bar:1225,Raw_Gold:1125,Diamond:1350,Moonstone:2300,Maple_Log:100,Apple:120,Raw_Porkchop:250,Cooked_Porkchop:350,Golem_Eye:450,Raw_Beef:300,Cooked_Beef:400,Raw_Mutton:350,Cooked_Mutton:450,Leather:500,Raw_Venison:400,Cooked_Venison:500,Fur:550,Knight_Heart:1e3,Bone_Antlers:600,Rice:25,Fat_Cactus:300,Dry_Fat_Cactus:250,Cranberries:55,Corn:60,Cotton:65,Chili_Pepper:70,Wheat:50,Watermelon:65,Watermelon_Slice:13,Melon:75,Melon_Slice:15,Pumpkin:71};function onPlayerDamagingOtherPlayer(e,t,o,a,s,i){if(!api.isInsideRect(api.getPosition(e),[-344,-331,-471],[-540,-151,-317],!0))return"preventDamage"}function onPlayerClick(e,t){let o=api.getHeldItem(e);if(o&&"Gold Coin"==o.name&&void 0!==o.attributes.customDisplayName){if(o.attributes.customDisplayName<=0)return void api.sendMessage(e,"You cannot deposit $0 or less!",{color:"red"});if(isNaN(o.attributes.customDisplayName))return void api.sendMessage(e,"Invalid Gold Coin amount!",{color:"red"});api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName)+Number(o.attributes.customDisplayName))}),updateUi(e),api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.removeItemName(e,o.name,1),api.sendMessage(e,`You deposited $${o.attributes.customDisplayName}!`,{color:"green"})}}function onPlayerAltAction(e,t,o,a,s,i){onPlayerClick(e,!0)}function onMobDamagingPlayer(e,t,o,a){return"preventDamage"}function actuallyGeneratingTheIsland(e,t){setTickTimeout((()=>api.setBlockRect([e,-150,429],[t,-150,424],"Bedrock")),0),setTickTimeout((()=>api.setBlockRect([e,-149,429],[t,-147,424],"Dirt")),1),setTickTimeout((()=>api.setBlockRect([e,-146,429],[t,-146,424],"Grass Block")),2),setTickTimeout((()=>api.setBlockRect([e-3,-150,426],[t,-146,424],"Air")),3)}function sell(e,t){let o=Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName),a=api.getHeldItem(e);if(!a)return void api.sendMessage(e,"You're not holding anything!",{color:"red"});let s=a.name.replaceAll(" ","_");if(valuableItems[s]){if("sell1Same"===t)api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(o+valuableItems[s])}),api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.removeItemName(e,a.name,1),api.sendMessage(e,`You sold 1 ${s} for $${valuableItems[s]} Note: The sold item can be from anywhere in your inventory.`,{color:"green"});else if("sellAllSame"===t){let t=api.getSelectedInventorySlotI(e),a=api.getItemSlot(e,t),i=valuableItems[s]*a.amount;api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(o+i)}),api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.sendMessage(e,`You sold all ${s}(s) for $${i} Note: The sold item can be from anywhere in your inventory.`,{color:"green"}),api.setItemSlot(e,t,"Air",0,{},!0)}updateUi(e)}else api.sendMessage(e,"This item cannot be sold.",{color:"red"})}function updateUi(e){let t=150*api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName;t>1650&&(t="Max"),api.setClientOptions(e,{RightInfoText:styTxt(`<w bold><s 20px>âœ¨SkyBloxdðŸŒŽðŸŒ³\n <w><s><c gray><i wrench><c> Owner - BloxdMasterYT_LT5 \n <c yellow><i coins><c> Coins - $${api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName}\n <i award> Level - ${api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName} \n <s 10px>XP: ${api.getMoonstoneChestItemSlot(e,3).attributes.customDisplayName} / ${t}\n If your messy stone generator is not working, \n just replace the water / lava. \nv1.3`)}),api.setTargetedPlayerSettingForEveryone(e,"lobbyLeaderboardValues",{coins:api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName},!0),api.setTargetedPlayerSettingForEveryone(e,"nameTagInfo",{subtitle:[{str:"$"+api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName}],subtitleBackgroundColor:"#4BE74F"},!0)}function shop(e,t,o){if(api.inventoryIsFull(e))return api.playSound(e,"beep",1,1,{playerIdOrPos:e}),api.sendMessage(e,"ur inventory is full lol ðŸ’€",{color:"red"}),!1;let a=Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName);a>=o?(api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(a-o)}),api.giveItem(e,t),api.sendMessage(e,`You bought ${t} for $${o}`,{color:"green"}),updateUi(e)):(api.playSound(e,"beep",1,1,{playerIdOrPos:e}),api.sendMessage(e,"ur too broke lol ðŸ’€",{color:"red"}))}function gamble(e,t,o,a){let s=Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName);if(s>=t){api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(s-t)});let i=Math.floor(Math.random()*(a-o+1))+o;api.sendMessage(e,`You gambled and ${i>0?"won":"lost"} $${Math.abs(i)}`,{color:i>0?"green":"red"}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(s-t+i)}),updateUi(e)}else api.playSound(e,"beep",1,1,{playerIdOrPos:e}),api.sendMessage(e,"ur too broke lol ðŸ’€",{color:"red"})}function generateIsland(e){let t=Number(api.getStandardChestItemSlot([-346,6,-433],0).attributes.customDisplayName)+512,o=t-5,a=String(t-1);api.setMoonstoneChestItemSlot(e,1,"Dirt",1,{customDisplayName:a}),api.setPosition(e,[Number(api.getMoonstoneChestItemSlot(e,1).attributes.customDisplayName),-136,428]),api.clearInventory(e),api.giveItem(e,"Water Bucket"),api.giveItem(e,"Lava Bucket"),api.giveItem(e,"Bone Meal"),api.giveItem(e,"Protector"),api.giveItem(e,"Maple Sapling");try{setTickTimeout((()=>{actuallyGeneratingTheIsland(t,o)}),3)}catch(t){api.sendMessage(e,"There was an error while generating your island: "+t+". Please use !resetEverything and try again.",{color:"red"})}"Bedrock"==api.getBlock(t,-150,429)&&api.sendMessage(e,"Island generated successfully!",{color:"green"}),api.setStandardChestItemSlot([-346,6,-433],0,"Dirt",1,void 0,{customDisplayName:a}),api.setPosition(e,[Number(api.getMoonstoneChestItemSlot(e,1).attributes.customDisplayName),-136,428])}function onPlayerJoin(e){if(null==api.getMoonstoneChestItemSlot(e,0))return api.setPosition(e,-346.5,8,-433.5),api.setMoonstoneChestItemSlot(e,2,"Messy Stone",1,{customDisplayName:"1"}),api.setMoonstoneChestItemSlot(e,3,"Messy Stone",1,{customDisplayName:"1"}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:"100"}),api.setClientOptions(e,{lobbyLeaderboardInfo:{pfp:{sortPriority:1},name:{displayName:"Name",sortPriority:0},coins:{displayName:"Coins",sortPriority:5}}}),api.sendMessage(e,"Welcome "+api.getEntityName(e)+" to this skyblock server! \n Use !help to view all avaliable commands.",{}),updateUi(e),setTickTimeout((()=>{generateIsland(e)}),100),!0;api.sendMessage(e,"Welcome back "+api.getEntityName(e)+"! \n Use !help to see all avaliable commands",{}),updateUi(e)}var resetConfirm=!1,nDN;function onPlayerChat(id,message){if(message.startsWith("!")){if("!help"==message&&api.sendMessage(id,"Here are some commands you can use:\n!island - Go to your island \n!resetEverything - Reset your everything\n!sellables - Show sellable items\n!help - Show this help message \n!xp - Show Levels and XP \n!withdraw (amount) - Withdraw money from bank to inventory ",{}),"!xp"==message){let e=150*api.getMoonstoneChestItemSlot(id,2).attributes.customDisplayName;e>1650&&(e="Max"),api.sendMessage(id,`You are level ${api.getMoonstoneChestItemSlot(id,2).attributes.customDisplayName} with ${api.getMoonstoneChestItemSlot(id,3).attributes.customDisplayName} / ${e} XP`,{})}if("!resetEverything"==message&&(api.setPosition(id,[-346,7,-433]),api.sendMessage(id,"Are you sure you want to reset everything? !y/!n",{}),resetConfirm=!0),"!sellables"==message&&(api.sendMessage(id,"Here are the items you can sell:\n"+Object.keys(valuableItems).map((e=>`${e}: $${valuableItems[e]}`)).join("\n"),{}),resetConfirm=!0),"!y"==message&&resetConfirm?(api.setMoonstoneChestItemSlot(id,0,"Air",1,{}),api.setMoonstoneChestItemSlot(id,1,"Air",1,{}),api.setMoonstoneChestItemSlot(id,2,"Air",1,{}),api.setMoonstoneChestItemSlot(id,3,"Air",1,{}),api.setMoonstoneChestItemSlot(id,4,"Air",1,{}),api.sendMessage(id,"Resetting...",{}),api.clearInventory(id),api.kickPlayer(id,"Resetting your everything... Please rejoin.")):"!n"==message&&resetConfirm&&(api.sendMessage(id,"Reset canceled.",{}),resetConfirm=!1,api.setPosition(id,[-346,3,-431])),"!island"==message&&(api.sendMessage(id,"Teleporting...",{}),api.setPosition(id,[Number(api.getMoonstoneChestItemSlot(id,1).attributes.customDisplayName)+1,-146,428])),message.includes("!withdraw ")){let e=Number(message.replace("!withdraw ","")),t=Number(api.getMoonstoneChestItemSlot(id,0).attributes.customDisplayName);if(e>t)return api.sendMessage(id,"Ur too broke lol",{color:"red"}),!1;if(api.inventoryIsFull(id))return api.sendMessage(id,"Ur inventory is full lol",{color:"red"}),!1;if(e<0)api.sendMessage(id,"cant withdraw negative money lol",{color:"red"});else if(t<e)api.sendMessage(id,"brokie lol",{color:"red"});else if(e>0)return api.setMoonstoneChestItemSlot(id,0,"Gold Coin",1,{customDisplayName:String(t-e)}),api.giveItem(id,"Gold Coin",1,{customDisplayName:String(e)}),api.sendMessage(id,`Succesfully Withdrew $${e}`,{color:"green"}),updateUi(id),!1}"BloxdMasterYT_LT5"==api.getEntityName(id)&&("!help"==message&&api.sendMessage(id,"!log !yell",{}),message.includes("!log")&&api.sendMessage(id,String(eval(message.replace("!log ",""))),{}),message.includes("!yell")&&eval(api.broadcastMessage(message.replace("!yell ",""),{color:"lightblue"})))}else api.broadcastMessage([{str:api.getEntityName(id),style:{color:"lightblue"}},{str:": ",style:{color:"lightblue"}},{str:message}]);return!1}function levelUp(e){let t=Number(api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName),o=Number(api.getMoonstoneChestItemSlot(e,3).attributes.customDisplayName)+1;if(o>150*t&&t<=12)return api.playSound(e,"levelup",1,1,{playerIdOrPos:e}),api.setMoonstoneChestItemSlot(e,2,"Messy Stone",1,{customDisplayName:String(Number(t+1))}),api.setMoonstoneChestItemSlot(e,3,"Messy Stone",1,{customDisplayName:"0"}),api.sendMessage(e,"You leveled up to level "+Number(String(t+1))+"!",{color:"green"}),api.sendTopRightHelper(e,"trophy","You leveled up to level "+Number(String(t+1))+"!",{}),void updateUi(e);api.setMoonstoneChestItemSlot(e,3,"Messy Stone",1,{customDisplayName:String(o)})}function mSBR(e,t,o,a){setTickTimeout((()=>{let s=api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName++;s>11&&(s=11);let i=Math.round(Math.random()*s),l=4,n=6,r=7,p=9;updateUi(e),l==i?api.setBlock(t,o,a,"Coal Ore"):n==i?api.setBlock(t,o,a,"Iron Ore"):r==i?api.setBlock(t,o,a,"Gold Ore"):p==i?api.setBlock(t,o,a,"Diamond Ore"):api.setBlock(t,o,a,"Messy Stone")}),1)}onPlayerChangeBlock=(e,t,o,a,s,i,l,n,r)=>{try{"Lava"==i&&"Water"==api.getBlock(t+2,o,a)&&"Air"==api.getBlock(t+1,o,a)&&api.setBlock(t+1,o,a,"Messy Stone"),"Lava"==i&&"Water"==api.getBlock(t-2,o,a)&&"Air"==api.getBlock(t-1,o,a)&&api.setBlock(t-1,o,a,"Messy Stone"),"Lava"==i&&"Water"==api.getBlock(t,o,a+2)&&"Air"==api.getBlock(t,o,a+1)&&api.setBlock(t,o,a+1,"Messy Stone"),"Lava"==i&&"Water"==api.getBlock(t,o,a-2)&&"Air"==api.getBlock(t,o,a-1)&&api.setBlock(t,o,a-1,"Messy Stone"),"Water"==i&&"Lava"==api.getBlock(t+2,o,a)&&"Air"==api.getBlock(t+1,o,a)&&api.setBlock(t+1,o,a,"Messy Stone"),"Water"==i&&"Lava"==api.getBlock(t-2,o,a)&&"Air"==api.getBlock(t-1,o,a)&&api.setBlock(t-1,o,a,"Messy Stone"),"Water"==i&&"Lava"==api.getBlock(t,o,a+2)&&"Air"==api.getBlock(t,o,a+1)&&api.setBlock(t,o,a+1,"Messy Stone"),"Water"==i&&"Lava"==api.getBlock(t,o,a-2)&&"Air"==api.getBlock(t,o,a-1)&&api.setBlock(t,o,a-1,"Messy Stone"),"Air"==i&&"Lava"==api.getBlock(t-1,o,a)&&"Water"==api.getBlock(t+1,o,a)&&(mSBR(e,t,o,a),levelUp(e)),"Air"==i&&"Lava"==api.getBlock(t+1,o,a)&&"Water"==api.getBlock(t-1,o,a)&&(mSBR(e,t,o,a),levelUp(e)),"Air"==i&&"Lava"==api.getBlock(t,o,a+1)&&"Water"==api.getBlock(t,o,a-1)&&(levelUp(e),mSBR(e,t,o,a)),"Air"==i&&"Lava"==api.getBlock(t,o,a-1)&&"Water"==api.getBlock(t,o,a+1)&&(mSBR(e,t,o,a),levelUp(e))}catch(e){console.log("An error occurred: "+e)}},onWorldSpawnMob=(e,t,o,a,s,i,l)=>{api.setMobSetting(e,"jumpMultiplier",0),api.setMobSetting(e,"attackInterval",1e9),api.setMobSetting(e,"attackDamage",0),api.setMobSetting(e,"hostilityRadius",0),api.setMobSetting(e,"attackImpulse",0),api.setMobSetting(e,"secondaryAttackImpulse",0),api.setMobSetting(e,"secondaryAttackDamage",0)};