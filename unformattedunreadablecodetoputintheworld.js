TTimers={};{let k=e=>api.broadcastMessage(e,{color:"#ff9d87"}),s=TTimers,m=1,l=0,f=0,T=0,o=1/0,a;setTickTimeout=(e,t=0)=>{let n=m++,r=l+t;if(s[n]=[e,r,T,0],T?s[T][3]=n:f=n,T=n,r<o&&(o=r),a=!0,!t){try{e()}catch(i){k("TTI: "+i)}clearTickTimeout(n)}return n},clearTickInterval=clearTickTimeout=e=>{let t=s[e];if(t){let o=t[2],l=t[3];o?s[o][3]=l:f=l,l?s[l][2]=o:T=o,delete s[e]}},setTickInterval=(e,t)=>{let o=setTickTimeout(e,t||=1);return s[o][4]=t,o},tick=(e,t)=>{if(t||++l>=o){a=!1;let n=1/0,r=f;for(;r;){let i=s[r];if(i[1]<=l){try{i[0]()}catch(c){k("TT: "+c)}if(i[4]){let m=l+i[4];i[1]=m,m<n&&(n=m)}else clearTickTimeout(r)}else i[1]<n&&(n=i[1]);r=i[3]}o=n,a&&tick(1,!0)}}}function styTxt(e){let t=styTxt;if(t.e||(t.e={c:"color",w:"fontWeight",st:"fontStyle",s:"fontSize",o:"opacity"},t.t=/(\\\<)|<(st|[cworis]) *([^>]+)?>/g),""==e)return[""];let o=[],s=new Map,l="",a=0;for(let{index:n,0:r,1:i,2:c,3:m}of[...e.matchAll(t.t),{index:e.length},]){if(l+=e.slice(a,n),a=n+(r?.length??0),i){l+="<";continue}if(l&&(o.push(s.size?{str:l,style:Object.fromEntries(s)}:l),l=""),n!=e.length){if("r"==c)s.clear();else if("i"==c&&m){let u=Object.fromEntries(s);delete u.fontStyle,o.push({icon:m,style:u})}else{let d=t.e[c];m?s.set(d,"o"==c?Number(m):m):s.delete(d)}}}return o}var nDN,valuableItems={Gold_Antlers:5500,Messy_Stone:20,Gold_Watermelon_Slice:300,Gold_Fragment:200,Coal:245,Raw_Iron:650,Iron_Bar:750,Gold_Bar:1225,Raw_Gold:1125,Diamond:1350,Moonstone:2300,Maple_Log:100,Apple:120,Raw_Porkchop:250,Cooked_Porkchop:350,Golem_Eye:450,Raw_Beef:300,Cooked_Beef:400,Raw_Mutton:350,Cooked_Mutton:450,Leather:500,Raw_Venison:400,Cooked_Venison:500,Fur:550,Knight_Heart:1e3,Bone_Antlers:600,Rice:25,Fat_Cactus:300,Dry_Fat_Cactus:250,Cranberries:55,Corn:60,Cotton:65,Chili_Pepper:70,Wheat:50,Watermelon:65,Watermelon_Slice:13,Melon:75,Melon_Slice:15,Pumpkin:71};function onPlayerDamagingOtherPlayer(e,t,o,s,l,a){if(!api.isInsideRect(api.getPosition(e),[-344,-331,-471],[-540,-151,-317],!0))return"preventDamage"}function onPlayerClick(e,t){let o=api.getHeldItem(e);o&&"Gold Coin"==o.name&&(api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName)+Number(o.attributes.customDisplayName))}),updateUi(e),api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.removeItemName(e,o.name,1),api.sendMessage(e,`You deposited $${o.attributes.customDisplayName}!`,{color:"green"}))}function onPlayerAltAction(e,t,o,s,l,a){onPlayerClick(e,!0)}function onMobDamagingPlayer(e,t,o,s){return"preventDamage"}function actuallyGeneratingTheIsland(e,t){setTickTimeout(()=>api.setBlockRect([e,-150,429],[t,-150,424],"Bedrock"),0),setTickTimeout(()=>api.setBlockRect([e,-149,429],[t,-147,424],"Dirt"),1),setTickTimeout(()=>api.setBlockRect([e,-146,429],[t,-146,424],"Grass Block"),2),setTickTimeout(()=>api.setBlockRect([e-3,-150,426],[t,-146,424],"Air"),3)}function sell(e,t){let o=Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName),s=api.getHeldItem(e);if(!s){api.sendMessage(e,"You're not holding anything!",{color:"red"});return}let l=s.name.replaceAll(" ","_");if(!valuableItems[l]){api.sendMessage(e,"This item cannot be sold.",{color:"red"});return}if("sell1Same"===t)api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(o+valuableItems[l])}),api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.removeItemName(e,s.name,1),api.sendMessage(e,`You sold 1 ${l} for $${valuableItems[l]} Note: The sold item can be from anywhere in your inventory.`,{color:"green"});else if("sellAllSame"===t){let a=api.getSelectedInventorySlotI(e),n=api.getItemSlot(e,a),r=valuableItems[l]*n.amount;api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(o+r)}),api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.sendMessage(e,`You sold all ${l}(s) for $${r} Note: The sold item can be from anywhere in your inventory.`,{color:"green"}),api.setItemSlot(e,a,"Air",0,{},!0)}updateUi(e)}function updateUi(e){let t=150*api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName;t>1650&&(t="Max"),api.setClientOptions(e,{RightInfoText:styTxt(`<w bold><s 20px>âœ¨SkyBloxdðŸŒŽðŸŒ³
 <w><s><c gray><i wrench><c> Owner - BloxdMasterYT_LT5 
 <c yellow><i coins><c> Coins - $${api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName}
 <i award> Level - ${api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName} 
 <s 10px>XP: ${api.getMoonstoneChestItemSlot(e,3).attributes.customDisplayName} / ${t}
 If your messy stone generator is not working, 
 just replace the water / lava. 
v1.3`)}),api.setTargetedPlayerSettingForEveryone(e,"lobbyLeaderboardValues",{coins:api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName},!0),api.setTargetedPlayerSettingForEveryone(e,"nameTagInfo",{subtitle:[{str:"$"+api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName},],subtitleBackgroundColor:"#4BE74F"},!0)}function shop(e,t,o){if(api.inventoryIsFull(e))return api.playSound(e,"beep",1,1,{playerIdOrPos:e}),api.sendMessage(e,`ur inventory is full lol ðŸ’€`,{color:"red"}),!1;let s=Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName);s>=o?(api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(s-o)}),api.giveItem(e,t),api.sendMessage(e,`You bought ${t} for $${o}`,{color:"green"}),updateUi(e)):(api.playSound(e,"beep",1,1,{playerIdOrPos:e}),api.sendMessage(e,`ur too broke lol ðŸ’€`,{color:"red"}))}function gamble(e,t,o,s){let l=Number(api.getMoonstoneChestItemSlot(e,0).attributes.customDisplayName);if(l>=t){api.playSound(e,"cashRegister",1,1,{playerIdOrPos:e}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(l-t)});let a=Math.floor(Math.random()*(s-o+1))+o;api.sendMessage(e,`You gambled and ${a>0?"won":"lost"} $${Math.abs(a)}`,{color:a>0?"green":"red"}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:String(l-t+a)}),updateUi(e)}else api.playSound(e,"beep",1,1,{playerIdOrPos:e}),api.sendMessage(e,`ur too broke lol ðŸ’€`,{color:"red"})}function generateIsland(e){let t=Number(api.getStandardChestItemSlot([-346,6,-433],0).attributes.customDisplayName)+512,o=t-5,s=String(t-1);api.setMoonstoneChestItemSlot(e,1,"Dirt",1,{customDisplayName:s}),api.setPosition(e,[Number(api.getMoonstoneChestItemSlot(e,1).attributes.customDisplayName),-136,428,]),api.clearInventory(e),api.giveItem(e,"Water Bucket"),api.giveItem(e,"Lava Bucket"),api.giveItem(e,"Bone Meal"),api.giveItem(e,"Protector"),api.giveItem(e,"Maple Sapling");try{setTickTimeout(()=>{actuallyGeneratingTheIsland(t,o)},3)}catch(l){api.sendMessage(e,"There was an error while generating your island: "+l+". Please use !resetEverything and try again.",{color:"red"})}"Bedrock"==api.getBlock(t,-150,429)&&api.sendMessage(e,"Island generated successfully!",{color:"green"}),api.setStandardChestItemSlot([-346,6,-433],0,"Dirt",1,void 0,{customDisplayName:s}),api.setPosition(e,[Number(api.getMoonstoneChestItemSlot(e,1).attributes.customDisplayName),-136,428,])}function onPlayerJoin(e){if(null==api.getMoonstoneChestItemSlot(e,0))return api.setPosition(e,-346.5,8,-433.5),api.setMoonstoneChestItemSlot(e,2,"Messy Stone",1,{customDisplayName:"1"}),api.setMoonstoneChestItemSlot(e,3,"Messy Stone",1,{customDisplayName:"1"}),api.setMoonstoneChestItemSlot(e,0,"Gold Coin",1,{customDisplayName:"100"}),api.setClientOptions(e,{lobbyLeaderboardInfo:{pfp:{sortPriority:1},name:{displayName:"Name",sortPriority:0},coins:{displayName:"Coins",sortPriority:5}}}),api.sendMessage(e,"Welcome "+api.getEntityName(e)+" to this skyblock server! \n Use !help to view all avaliable commands.",{}),updateUi(e),setTickTimeout(()=>{generateIsland(e)},100),!0;api.sendMessage(e,"Welcome back "+api.getEntityName(e)+"! \n Use !help to see all avaliable commands",{}),updateUi(e)}var resetConfirm=!1;function onPlayerChat(id,message){if(message.startsWith("!")){if("!help"==message&&api.sendMessage(id,"Here are some commands you can use:\n!island - Go to your island \n!resetEverything - Reset your island\n!sellables - Show sellable items\n!help - Show this help message \n!xp - Show Levels and XP \n!withdraw (amount) - Withdraw money from bank to inventory ",{}),"!xp"==message){let xpStuff=150*api.getMoonstoneChestItemSlot(id,2).attributes.customDisplayName;xpStuff>1650&&(xpStuff="Max"),api.sendMessage(id,`You are level ${api.getMoonstoneChestItemSlot(id,2).attributes.customDisplayName} with ${api.getMoonstoneChestItemSlot(id,3).attributes.customDisplayName} / ${xpStuff} XP`,{})}if("!resetEverything"==message&&(api.setPosition(id,[-346,7,-433]),api.sendMessage(id,"Are you sure you want to reset everything? !y/!n",{}),resetConfirm=!0),"!sellables"==message&&(api.sendMessage(id,"Here are the items you can sell:\n"+Object.keys(valuableItems).map(e=>`${e}: $${valuableItems[e]}`).join("\n"),{}),resetConfirm=!0),"!y"==message&&resetConfirm?(api.setMoonstoneChestItemSlot(id,0,"Gold Coin",1,{customDisplayName:"100"}),api.sendMessage(id,"Resetting...",{}),api.clearInventory(id),generateIsland(id)):"!n"==message&&resetConfirm&&(api.sendMessage(id,"Reset canceled.",{}),resetConfirm=!1,api.setPosition(id,[-346,3,-431])),"!island"==message&&(api.sendMessage(id,"Teleporting...",{}),api.setPosition(id,[-346.5,2,-431.5])),message.includes("!withdraw ")){let ammount=Number(message.replace("!withdraw ","")),coins=Number(api.getMoonstoneChestItemSlot(id,0).attributes.customDisplayName);if(ammount>coins)return api.sendMessage(id,"Ur too broke lol",{color:"red"}),!1;if(api.inventoryIsFull(id))return api.sendMessage(id,"Ur inventory is full lol",{color:"red"}),!1;if(ammount<0)api.sendMessage(id,"cant withdraw negative money lol",{color:"red"});else if(ammount>0&&coins>ammount)return api.setMoonstoneChestItemSlot(id,0,"Gold Coin",1,{customDisplayName:String(coins-ammount)}),api.giveItem(id,"Gold Coin",1,{customDisplayName:String(ammount)}),api.sendMessage(id,`Succesfully Withdrew $${ammount}`,{color:"green"}),updateUi(id),!1}"BloxdMasterYT_LT5"==api.getEntityName(id)&&("!help"==message&&api.sendMessage(id,"!log !yell",{}),message.includes("!log")&&api.sendMessage(id,String(eval(message.replace("!log ",""))),{}),message.includes("!yell")&&eval(api.broadcastMessage(message.replace("!yell ",""),{color:"lightblue"})))}else api.broadcastMessage([{str:api.getEntityName(id),style:{color:"lightblue"}},{str:": ",style:{color:"lightblue"}},{str:message},]);return!1}var ews=!0;function onBlockStand(e,t,o,s,l){!0==ews?(ews=!1,setTickTimeout(()=>{"Block of Emerald"==l?(api.setPosition(e,[Number(api.getMoonstoneChestItemSlot(e,1).attributes.customDisplayName)+1,-146,428,]),api.sendMessage(e,"Teleporting...",{})):"Beacon"==l&&(api.setPosition(e,[1000.5,-450,1000.5]),api.sendMessage(e,"Teleporting...",{}))},2)):ews=!0}function levelUp(e){let t=Number(api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName),o=Number(api.getMoonstoneChestItemSlot(e,3).attributes.customDisplayName)+1;if(o>150*t){api.playSound(e,"levelup",1,1,{playerIdOrPos:e}),api.setMoonstoneChestItemSlot(e,2,"Messy Stone",1,{customDisplayName:String(Number(t+1))}),api.setMoonstoneChestItemSlot(e,3,"Messy Stone",1,{customDisplayName:"0"}),api.sendMessage(e,"You leveled up to level "+Number(String(t+1))+"!",{color:"green"}),api.sendTopRightHelper(e,"trophy","You leveled up to level "+Number(String(t+1))+"!",{}),updateUi(e);return}api.setMoonstoneChestItemSlot(e,3,"Messy Stone",1,{customDisplayName:String(o)})}function mSBR(e,t,o,s){setTickTimeout(()=>{let l=api.getMoonstoneChestItemSlot(e,2).attributes.customDisplayName++;l>11&&(l=11);let a=Math.round(Math.random()*l),n={"Messy Stone":0,"Coal Ore":4,"Iron Ore":6,"Gold Ore":7,"Diamond Ore":9,"Moonstone Ore":10};updateUi(e),n["Coal Ore"]==a?api.setBlock(t,o,s,"Coal Ore"):n["Iron Ore"]==a?api.setBlock(t,o,s,"Iron Ore"):n["Gold Ore"]==a?api.setBlock(t,o,s,"Gold Ore"):n["Diamond Ore"]==a?api.setBlock(t,o,s,"Diamond Ore"):api.setBlock(t,o,s,"Messy Stone")},1)}onPlayerChangeBlock=(e,t,o,s,l,a,n,r,i)=>{try{"Lava"==a&&"Water"==api.getBlock(t+2,o,s)&&"Air"==api.getBlock(t+1,o,s)&&api.setBlock(t+1,o,s,"Messy Stone"),"Lava"==a&&"Water"==api.getBlock(t-2,o,s)&&"Air"==api.getBlock(t-1,o,s)&&api.setBlock(t-1,o,s,"Messy Stone"),"Lava"==a&&"Water"==api.getBlock(t,o,s+2)&&"Air"==api.getBlock(t,o,s+1)&&api.setBlock(t,o,s+1,"Messy Stone"),"Lava"==a&&"Water"==api.getBlock(t,o,s-2)&&"Air"==api.getBlock(t,o,s-1)&&api.setBlock(t,o,s-1,"Messy Stone"),"Water"==a&&"Lava"==api.getBlock(t+2,o,s)&&"Air"==api.getBlock(t+1,o,s)&&api.setBlock(t+1,o,s,"Messy Stone"),"Water"==a&&"Lava"==api.getBlock(t-2,o,s)&&"Air"==api.getBlock(t-1,o,s)&&api.setBlock(t-1,o,s,"Messy Stone"),"Water"==a&&"Lava"==api.getBlock(t,o,s+2)&&"Air"==api.getBlock(t,o,s+1)&&api.setBlock(t,o,s+1,"Messy Stone"),"Water"==a&&"Lava"==api.getBlock(t,o,s-2)&&"Air"==api.getBlock(t,o,s-1)&&api.setBlock(t,o,s-1,"Messy Stone"),"Air"==a&&"Lava"==api.getBlock(t-1,o,s)&&"Water"==api.getBlock(t+1,o,s)&&(mSBR(e,t,o,s),levelUp(e)),"Air"==a&&"Lava"==api.getBlock(t+1,o,s)&&"Water"==api.getBlock(t-1,o,s)&&(mSBR(e,t,o,s),levelUp(e)),"Air"==a&&"Lava"==api.getBlock(t,o,s+1)&&"Water"==api.getBlock(t,o,s-1)&&(levelUp(e),mSBR(e,t,o,s)),"Air"==a&&"Lava"==api.getBlock(t,o,s-1)&&"Water"==api.getBlock(t,o,s+1)&&(mSBR(e,t,o,s),levelUp(e))}catch(c){console.log("An error occurred: "+c)}},onWorldSpawnMob=(e,t,o,s,l,a,n)=>{api.setMobSetting(e,"jumpMultiplier",0),api.setMobSetting(e,"attackInterval",1e9),api.setMobSetting(e,"attackDamage",0),api.setMobSetting(e,"hostilityRadius",0),api.setMobSetting(e,"attackImpulse",0),api.setMobSetting(e,"secondaryAttackImpulse",0),api.setMobSetting(e,"secondaryAttackDamage",0)};